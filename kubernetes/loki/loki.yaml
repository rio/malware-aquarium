apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: loki
  namespace: kube-system
spec:
  repo: https://grafana.github.io/helm-charts
  chart: loki
  targetNamespace: loki
    # version: 1.4.2
  valuesContent: |-
    config:
      server:
        # double the default message sizes. Seems we're logging big boi
        grpc_server_max_recv_msg_size: 150000000
        grpc_server_max_send_msg_size: 150000000

      limits_config:
        max_entries_limit_per_query: 5000

    persistence:
      enabled: true